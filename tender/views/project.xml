<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="project_tender_sequence" model="ir.sequence">
            <field name="name">Project</field>
            <field name="code">project.code</field>
            <field name="prefix">PR/</field>
            <field name="padding">5</field>
        </record>

        <!-- Inherit Form View to Modify it -->
        <record id="edit_project_tender" model="ir.ui.view">
            <field name="name">edit_project_tender</field>
            <field name="model">project.project</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='partner_id']" position="after">

                    <field name="project_number" readonly="1" force_save="1"/>
                    <field name="project_refernce" force_save="1"/>


                </xpath>
                <xpath expr="//header" position="inside">
                    <field name="is_tender" invisible="1"/>
                    <field name="state" invisible="1"/>
                    <button name="action_confirm_project" type="object"
                             invisible="state=='confirm' or  is_tender==False"
                            string="Confirm Project"/>
                    <button name="create_job_ct" type="object" string="Create BreakDown"/>
                    <button name="create_quotation" type="object" string="Create Offer"/>
                     <button name="update_currency" type="object" string="update Currency"/>
                    <!-- Add your fields or attributes here -->
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="required">is_tender==True</attribute>

                </xpath>
                <xpath expr="//field[@name='label_tasks']"
                       position="attributes">
                   <attribute name="invisible">is_tender==True</attribute>
                </xpath>
                <xpath expr="//div[@name='button_box']" position="inside">
                    <button class="oe_stat_button" name="upload_tender" type="object" icon="fa-tasks">
                        Upload Tender
                    </button>
                    <button class="oe_stat_button" name="view_estimation" type="object" icon="fa-tasks">
                        <field name="job_cost_count"/>View Estimation
                    </button>
                    <field name="is_quotation" invisible="1"/>
                      <button class="oe_stat_button" name="view_quotation" type="object" icon="fa-file-text-o"

                              invisible="is_quotation==False"
                      >
                    <field string="Quotations" name="quotation_count" widget="statinfo"/>
                </button>

                </xpath>
                <xpath expr="//notebook/page[1]" position="before">
                    <page name="Tender">
                        <field name="tender_ids" widget="section_and_note_one2many">
                            <tree editable="bottom">
                                <control>
                                    <create name="add_product_control" string="Add Item"/>
                                    <create name="add_section_control" string="Add a section"
                                            context="{'default_display_type': 'line_section'}"/>
                                    <create name="add_note_control" string="Add a note"
                                            context="{'default_display_type': 'line_note'}"/>
                                </control>
                                <field name="display_type" invisible="1" optional="show"/>
                                <field name="sequence" widget="handle" optional="show"/>


                                <field name="code"  required="display_type==False"
                                       optional="show" width="100px"/>
                                <!--                            <field name="parent_item"/>-->
                                <field name="item"  required="display_type==False"
                                       optional="show" width="100px"/>
                                <field name="name"  required="display_type==False"
                                       widget="section_and_note_text"
                                       optional="show" width="100px"/>
                                <field name="related_job_id"
                                       optional="show" width="100px"/>
                                <field name="uom_id"  required="display_type==False"
                                       optional="show" width="100px"/>
                                <field name="qty"  required="display_type==False"
                                       optional="show" width="100px"/>

                                <field name="price_unit" sum="Total" optional="show" width="100px" readonly="1" force_save="1"/>

                                <field name="cost_unit" optional="show" width="100px" readonly="1" force_save="1"/>
                                <field name="state" optional="show" width="100px" readonly="1" force_save="1"/>
                                <field name="total_direct" sum="Total" optional="show" width="100px"/>
                                <field name="total_indirect" sum="Total" optional="show" width="100px"/>
                                <field name="total_profit" sum="Total" optional="show" width="100px"/>

                                <field name="sale_price"  sum="Total" optional="show" width="100px"/>
<!--                                <field name="tax_ids" widget="many2many_tags" optional="show" width="100px"/>-->
<!--                                  <field name="amount_total" sum="Total" optional="show" width="100px"/>-->
                                <field name="note" optional="show" width="100px"/>


                            </tree>
                            <form>
                                <group>
                                    <group>
                                        <field name="code"/>
                                        <field name="name"/>
                                    </group>
                                    <group>

                                    </group>
                                </group>
                            </form>
                        </field>
                    </page>
                    <page string="Currency">
                        <field name="currency_ids">
                            <tree editable="bottom">
                                <field name="currency_id"/>
                                <field name="rate"/>
                            </tree>
                        </field>
                    </page>
                    <page name="other_info" string="Other info">
                        <group>
                            <group>
                                <field name="created_date"/>
                                <field name="consultant"/>
                                <field name="manager_id"/>
                                <field name="company_id" invisible="1"/>
                                <field name="date_from"/>
                                <field name="date_to"/>
                                <field name="dif"/>
                            </group>
                            <group>
                                <field name="date_contract"/>
                                <field name="tender_submission_date"/>
                                <field name="location_acquisition_date"/>

                                <field name="currancy_id" invisible="1"/>
                            </group>

                        </group>
                    </page>
                </xpath>


            </field>
        </record>
    </data>
</odoo>